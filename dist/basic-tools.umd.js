(function(E){typeof define=="function"&&define.amd?define(E):E()})(function(){"use strict";var E=function(f,r){r||(r={});var e={bools:{},strings:{},unknownFn:null};typeof r.unknown=="function"&&(e.unknownFn=r.unknown),typeof r.boolean=="boolean"&&r.boolean?e.allBools=!0:[].concat(r.boolean).filter(Boolean).forEach(function(n){e.bools[n]=!0});var c={};Object.keys(r.alias||{}).forEach(function(n){c[n]=[].concat(r.alias[n]),c[n].forEach(function(s){c[s]=[n].concat(c[n].filter(function(v){return s!==v}))})}),[].concat(r.string).filter(Boolean).forEach(function(n){e.strings[n]=!0,c[n]&&(e.strings[c[n]]=!0)});var _=r.default||{},b={_:[]};Object.keys(e.bools).forEach(function(n){a(n,_[n]===void 0?!1:_[n])});var O=[];f.indexOf("--")!==-1&&(O=f.slice(f.indexOf("--")+1),f=f.slice(0,f.indexOf("--")));function S(n,s){return e.allBools&&/^--[^=]+$/.test(s)||e.strings[n]||e.bools[n]||c[n]}function a(n,s,v){if(!(v&&e.unknownFn&&!S(n,v)&&e.unknownFn(v)===!1)){var o=!e.strings[n]&&F(s)?Number(s):s;w(b,n.split("."),o),(c[n]||[]).forEach(function(m){w(b,m.split("."),o)})}}function w(n,s,v){for(var o=n,m=0;m<s.length-1;m++){var u=s[m];if(u==="__proto__")return;o[u]===void 0&&(o[u]={}),(o[u]===Object.prototype||o[u]===Number.prototype||o[u]===String.prototype)&&(o[u]={}),o[u]===Array.prototype&&(o[u]=[]),o=o[u]}var u=s[s.length-1];u!=="__proto__"&&((o===Object.prototype||o===Number.prototype||o===String.prototype)&&(o={}),o===Array.prototype&&(o=[]),o[u]===void 0||e.bools[u]||typeof o[u]=="boolean"?o[u]=v:Array.isArray(o[u])?o[u].push(v):o[u]=[o[u],v])}function $(n){return c[n].some(function(s){return e.bools[s]})}for(var l=0;l<f.length;l++){var t=f[l];if(/^--.+=/.test(t)){var B=t.match(/^--([^=]+)=([\s\S]*)$/),i=B[1],y=B[2];e.bools[i]&&(y=y!=="false"),a(i,y,t)}else if(/^--no-.+/.test(t)){var i=t.match(/^--no-(.+)/)[1];a(i,!1,t)}else if(/^--.+/.test(t)){var i=t.match(/^--(.+)/)[1],h=f[l+1];h!==void 0&&!/^-/.test(h)&&!e.bools[i]&&!e.allBools&&(c[i]?!$(i):!0)?(a(i,h,t),l++):/^(true|false)$/.test(h)?(a(i,h==="true",t),l++):a(i,e.strings[i]?"":!0,t)}else if(/^-[^-]+/.test(t)){for(var d=t.slice(1,-1).split(""),A=!1,p=0;p<d.length;p++){var h=t.slice(p+2);if(h==="-"){a(d[p],h,t);continue}if(/[A-Za-z]/.test(d[p])&&/=/.test(h)){a(d[p],h.split("=")[1],t),A=!0;break}if(/[A-Za-z]/.test(d[p])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(h)){a(d[p],h,t),A=!0;break}if(d[p+1]&&d[p+1].match(/\W/)){a(d[p],t.slice(p+2),t),A=!0;break}else a(d[p],e.strings[d[p]]?"":!0,t)}var i=t.slice(-1)[0];!A&&i!=="-"&&(f[l+1]&&!/^(-|--)[^-]/.test(f[l+1])&&!e.bools[i]&&(c[i]?!$(i):!0)?(a(i,f[l+1],t),l++):f[l+1]&&/^(true|false)$/.test(f[l+1])?(a(i,f[l+1]==="true",t),l++):a(i,e.strings[i]?"":!0,t))}else if((!e.unknownFn||e.unknownFn(t)!==!1)&&b._.push(e.strings._||!F(t)?t:Number(t)),r.stopEarly){b._.push.apply(b._,f.slice(l+1));break}}return Object.keys(_).forEach(function(n){N(b,n.split("."))||(w(b,n.split("."),_[n]),(c[n]||[]).forEach(function(s){w(b,s.split("."),_[n])}))}),r["--"]?(b["--"]=new Array,O.forEach(function(n){b["--"].push(n)})):O.forEach(function(n){b._.push(n)}),b};function N(f,r){var e=f;r.slice(0,-1).forEach(function(_){e=e[_]||{}});var c=r[r.length-1];return c in e}function F(f){return typeof f=="number"||/^0x[0-9a-f]+$/i.test(f)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(f)}E(process.argv.splice(2))});
